{% extends "base.html" %}

{% block body %}
<div class="container mt-5 mb-5">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <h1>KüA-Kategorien</h1>
            {% if base.auth_token.expect("auth_token should be provided").has_privilege(*event_id, Privilege::ManageCategories) %}
                <div class="mb-3">
                    <a href="{{ base.url_for_event_endpoint("manage_categories")? }}" class="btn btn-outline-primary"><i class="bi bi-gear" aria-hidden="true"></i> Kategorien verwalten</a>
                </div>
            {% endif %}

            <div class="list-group">
                {% for category in categories %}
                    {% let entry_count = *entry_counts.get(category.id).unwrap_or(&0) %}
                    <a href="{{ base.request.url_for("main_list_by_category", [event_id.to_string(), category.id.to_string()])? }}" class="list-group-item list-group-item-action category-row {% if category.is_official %}fw-semibold{% endif %}"
                       style="{{ CategoryColors::from_base_color_hex(category.color)?.as_css() }}">
                        <span class="float-end d-inline-block ms-2" aria-hidden="true"><i class="bi bi-chevron-right"></i></span>
                        <span class="float-end badge rounded-pill {% if entry_count == 0 %}text-bg-secondary{% else %}text-bg-light{% endif %} ms-2" title="Anzahl Einträge">
                            {{ entry_count }}
                            <span class="visually-hidden">Einträge</span>
                        </span>
                        <span class="float-end d-inline-block ms-2" aria-hidden="true">{{category.icon}}</span>
                        {{category.title}}
                    </a>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
